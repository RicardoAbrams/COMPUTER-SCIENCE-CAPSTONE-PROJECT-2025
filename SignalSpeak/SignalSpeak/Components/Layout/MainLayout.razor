@using Microsoft.AspNetCore.Components.Authorization
@using Microsoft.AspNetCore.Identity
@inject AuthenticationStateProvider AuthStateProvider
@inject SignInManager<IdentityUser> SignInManager
@inject NavigationManager Navigation

@inherits LayoutComponentBase
@inject NavigationManager Navigation
@inject UserManager<IdentityUser> UserManager

<div class="page">
    @* Only show sidebar if user is authenticated AND not on the landing page *@
   @* <AuthorizeView>*@
      @*  <Authorized>*@
            @if (!IsLandingPage)
            {
                <div class="sidebar">
                    <NavMenu />
                </div>
            }
      @*  </Authorized>*@
  @*  </AuthorizeView>*@

    <main>
        @* Hide the top-row (About link) on the landing page for a cleaner look *@
        @if (!IsLandingPage)
        {
            <div class="top-row px-4">
                <a href="https://learn.microsoft.com/aspnet/core/" target="_blank">About</a>
            </div>
        }

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

<div id="blazor-error-ui">
    An unhandled error has occurred.
    <a href="" class="reload">Reload</a>
    <a class="dismiss">🗙</a>
</div>


@code {
    private bool IsLandingPage => Navigation.ToBaseRelativePath(Navigation.Uri) == "";
}
